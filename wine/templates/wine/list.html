{% extends "base.html" %}
{% block content %}
{% load wine_tags %}

<h1 class="list-title">Wine list</h1>

<div class="list-container">

    {% for wine in wines %}
    <div class="list-element">
        {% if wine.picture %}
            <div class="wine-bottle-image">
                <img src="{{ wine.picture.url }}">
                </img>
                {% show_attribution wine %}
            </div>
        {% else %}
            <p class="not-found">No image found</p>
        {% endif %}
            <div class="wine-contents">

            
                <p>
                    <i>{{ wine.producer }}</i>
                </p>
                <p>
                    <b><a href="{{ wine.get_absolute_url }}">{{ wine.name }}</a></b>
                </p>
                <p>{{ wine.description }}</p>
                <br />
                
    

                <p>Score:</p>
                {% if wine.get_avg_score %}
                    {{ wine.get_avg_score.score__avg }}
                {% else %}
                    No ratings yet.
                {% endif %}

                <div class="rank-contents">

                    <p>Trending Rank</p>
    
                    {% if wine.pageviews > 0 %}
    
                        <p>{{ wine.trending_rank }}</p>
    
                    {% else %}
    
                        <p>-</p>
    
                    {% endif %}
                </div>
            </div>
            
        </div>
        {% empty %}
            <p>
                There are no wines in the DB yet.
            </p>
    {% endfor %}
</div>
{% endblock %}